var Jingle=J={settings:{transitionType:"slide",transitionTime:250,transitionTimingFunc:"ease-out"},mode:800>window.innerWidth?"phone":"tablet",hasTouch:"ontouchstart"in window,hasLaunched:!1,launchCompleted:!1,isMenuOpen:!1,launch:function(n){$.extend(this.settings,n),this.Router.init(),this.Markup.init()}};Jingle.Constants=function(n){return{Events:{startEvent:n.hasTouch?"touchstart":"mousedown",moveEvent:n.hasTouch?"touchmove":"mousemove",endEvent:n.hasTouch?"touchend":"mouseup",tap:n.hasTouch?"tap":"click"}}}(J),Jingle.Element=function(){var n=function(){};return{init:n}}(Jingle),Jingle.Markup=function(){var n={icon:'<i class="icon {value}"></i>'},t=function(t){var i=$(t||"body");if(0!=i.length)for(var e in n)i.find("[data-"+e+"]").each(function(t,i){var a=$(i).data(e);$(i).prepend(n[e].replace("{value}",a))})};return{init:t}}(),Jingle.Page=function(n){var t=function(n){return 0==n.indexOf("#")?n:"#"+n},i=function(n){var n=t(n);window.location.hash=n},e=function(t,e){return $("#"+t).length>0?(i(t),void 0):($.get(n.pageFolder+e,function(n){$("body").append($(n)),i(t)}),void 0)},a=function(t,i,e){$.get(n.templateFoler+i,function(n){var i=$.tmpl(n,t);e(i)})},o=function(n,t,e){return $("#"+n).length>0?(i(n),void 0):($.get(t,function(t){a(t,e,function(t){$("body").append(t),i(n)})}),void 0)};return{go:i,loadPage:e,loadPageByTmpl:o}}(Jingle),Jingle.Router=function(){var n="a[data-target]",t=[],i=function(){var t=J.Constants.Events.tap;$(window).on("popstate",e),$(document).on(t,n,a),r("#main")},e=function(n){if(n.state&&n.state.hash){var i=n.state.hash;i===t[1]&&s()}},a=function(n){n.preventDefault();var t=$(this).attr("data-target"),i=$(this).attr("href");switch(t){case"section":o(i);break;case"article":c(i);break;case"menu":h();break;case"back":s()}},o=function(n){var i=$(t[0]);r(n),u(i,n)},s=function(){u(t.shift(),t[0],!0),window.history.replaceState({hash:t[0]},"",t[0])},u=function(n,t,i){J.Transition.run(n,t,i)},r=function(n){t.unshift(n),window.history.pushState({hash:n},"",n)},c=function(n){var t=$(n),i=t.siblings(".active");i.animate("bounceOutUp",1e3,"linear",function(){$(this).removeClass("active"),t.addClass("active"),t.animate("bounceInDown",1e3,"linear",function(){})})},h=function(){J.isMenuOpen?J.Menu.hide():J.Menu.show()};return{init:i,turnTo:o,back:s}}(),Jingle.Transition=function(n){var t={slide:[["slideRightOut","slideRightIn"],["slideLeftOut","slideLeftIn"]]},i=function(t,i,a){var o=n.settings.transitionTime,s=n.settings.transitionTimingFunc;i.addClass("active"),t.animate(a[0],o,s,function(){e(t,i)}),i.animate(a[1],o,s)},e=function(n,t){n.removeClass("active"),n.trigger("pagehide"),t.trigger("pageshow")},a=function(e,a,o){e=$(e),a=$(a);var s=e.attr("data-transition")||n.settings.transitionType,u=o?t[s][0]:t[s][1];i(e,a,u)};return{run:a}}(Jingle);