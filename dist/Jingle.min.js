var Jingle=J={settings:{transitionType:"slide",transitionTime:400,transitionTimingFunc:"ease",sectionPath:"html/"},mode:window.innerWidth<800?"phone":"tablet",hasTouch:"ontouchstart"in window,hasLaunched:!1,launchCompleted:!1,isMenuOpen:!1,hasPopupOpen:!1,isWebApp:"http:"==location.protocol,launch:function(a){$.extend(this.settings,a),this.Router.init(),this.Element.init()},anim:function(a,b){for(var c,d,e,f=arguments.length,g=2;f>g;g++){var h=arguments[g],i=$.type(h);"number"==i?c=h:"string"==i?d=h:"function"==i?e=h:null}$(a).animate(b,c||J.settings.transitionTime,d||J.settings.transitionTimingFunc,e)},showMask:function(a,b){"function"==$.type(a)&&(b=a,a=null),a=a||"Loading...",this.Toast.show("loading",a,b)},hideMask:function(){this.Toast.hide()},showToast:function(a,b){b=b||"toast",this.Toast.show(b,a)},hideToast:function(){this.Toast.hide()},alert:function(a,b){this.Popup.alert(a,b)},confirm:function(a,b,c,d){this.Popup.confirm(a,b,c,d)},popup:function(a,b,c){this.Popup.show(a,b,c)},closePopup:function(){this.Popup.close()},popover:function(a,b,c){this.Popup.popover(a,b,c)},tmpl:function(a,b,c){this.Template.render(a,b,c)}};Jingle.Element=function(){var a={icon:"[data-icon]",scroll:'[data-scroll="true"]',toggle:".toggle",range:"[data-rangeinput]",progress:"[data-progress]",count:"[data-count]"},b=function(b){var c=$(b||"body");0!=c.length&&($.map($(a.icon,c),d),$.map($(a.toggle,c),f),$.map($(a.range,c),g),$.map($(a.progress,c),h),$.map($(a.count,c),i))},c=function(b){var c=$(b||"body");c.data("scroll")?e():$.map($(a.scroll,c),e)},d=function(a){$(a).prepend('<i class="icon '+$(a).data("icon")+'"></i>')},e=function(a){J.Scroll(a)},f=function(a){var b=$(a),c=b.attr("name");c&&b.append('<input style="display: none;" name="'+c+'" value="'+b.hasClass("active")+'"/>');var d=b.find("input");b.tap(function(){var a;b.hasClass("active")?(b.removeClass("active"),a=!1):(b.addClass("active"),a=!0),d.val(a),b.trigger("toggle")})},g=function(a){var b,c=$(a),d=$('input[type="range"]',a),e=c.data("rangeinput"),f=$('<input type="text" name="test" value="'+d.val()+'"/>');b="left"==e?f.prependTo(c):f.appendTo(c);var g=parseInt(d.attr("max"),10),h=parseInt(d.attr("min"),10);d.change(function(){b.val(d.val())}),b.on("input",function(){var a=parseInt(b.val(),10);a=a>g?g:h>a?h:a,d.val(a),b.val(a)})},h=function(a){var b=$(a),c=parseFloat(b.data("progress")),d=b.data("title")||"",e=$('<div class="bar"></div>');c+="%",e.appendTo(b).width(c).text(d+c),"100%"==c&&e.css("border-radius","10px")},i=function(a){var b=$(a),c=parseInt(b.data("count")),d=b.data("orient"),e="left"==d?"left":"",f='<span class="count '+e+'">'+c+"</span>";b.append(f),0==c&&$(".count",a).hide()};return{init:b,initIcon:d,initToggle:f,initProgress:h,initRange:g,initCount:i,initScroll:c}}(),Jingle.Page=function(a){var b=function(a){return 0==a.indexOf("#")?a.substr(1):a},c=function(c){var d=b(c);$.ajax({url:a.settings.sectionPath+d+".html",timeout:5e3,async:!1,success:function(b){$("#section-container").append(b),$("#"+d).trigger("page.load"),a.Element.init(c)}})};return{load:c}}(Jingle),Jingle.Refresh=function(){var a,b,c,d,e,f,g=function(g){a=$("#"+g.containerId).children()[0];var h='<div class="refresh-container"><span class="refresh-icon icon '+g.onPullIcon+'"></span><span class="refresh-label">'+g.onPull+"</span></div>";b=f?$(h).prependTo(a):$(h).appendTo(a),e=b.height(),c=b.find(".refresh-icon"),d=b.find(".refresh-label")},h=function(a){f=!0;var b={containerId:null,onPull:"下拉刷新...",onRelease:"松开立即刷新...",onRefresh:"刷新中...",onPullIcon:"arrow-down-2",onReleaseIcon:"arrow-up-3",onRefreshIcon:"spinner",callback:void 0};$.extend(b,a),g(b),j(b)},i=function(a){f=!1;var b={containerId:null,onPull:"上拉加载更多...",onRelease:"松开开立即加载...",onRefresh:"加载中...",onPullIcon:"arrow-up-3",onReleaseIcon:"arrow-down-2",onRefreshIcon:"spinner",callback:void 0};$.extend(b,a),g(b),j(b)},j=function(a){J.Scroll(a.containerId,{topOffset:f?e:0,bounce:!0,onScrollMove:function(){this.y>5&&f&&!c.hasClass(a.onReleaseIcon)?(c.removeClass(a.onPullIcon).addClass(a.onReleaseIcon),d.html(a.onRelease),this.minScrollY=0):this.y<5&&f&&!c.hasClass(a.onPullIcon)?(c.removeClass(a.onReleaseIcon).addClass(a.onPullIcon),d.html(a.onPull),this.minScrollY=-e):this.y<this.maxScrollY-5&&!c.hasClass(a.onReleaseIcon)?(c.removeClass(a.onPullIcon).addClass(a.onReleaseIcon),d.html(a.onRelease),this.maxScrollY=this.maxScrollY):this.y>this.maxScrollY+5&&!c.hasClass(a.onPullIcon)&&(c.removeClass(a.onReleaseIcon).addClass(a.onPullIcon),d.html(a.onPull),this.maxScrollY=e)},onScrollEnd:function(){c.hasClass(a.onReleaseIcon)&&(c.removeClass(a.onReleaseIcon).addClass(a.onRefreshIcon),d.html(a.onRefresh),a.callback.call(this))},onRefresh:function(){c.removeClass(a.onRefreshIcon).addClass(a.onPullIcon),d.html(a.onPull)}})};return{pullDown:h,pullUp:i}}(),Jingle.Router=function(){var a="a[data-target]",b=[],c=function(){$(window).on("popstate",d),$(document).on("tap","a",function(a){a.preventDefault()}),$(document).on("click","a",function(a){a.preventDefault()}),$(document).on("tap",a,e);var b=$("#section-container section.active").trigger("pageinit").trigger("pageshow").attr("id");i("#"+b)},d=function(a){if(a.state&&a.state.hash){var c=a.state.hash;c===b[1]&&g()}},e=function(a){a.preventDefault();var b=$(this),c=b.attr("data-target"),d=b.attr("href");switch(c){case"section":f(d);break;case"article":j(d,b);break;case"menu":k();break;case"back":g()}},f=function(a){if(J.isMenuOpen&&J.Menu.hide(),b[0]!==a){var c=$(b[0]);i(a),0===$(a).length&&J.Page.load(a),h(c,a)}},g=function(){h(b.shift(),b[0],!0),window.history.replaceState({hash:b[0]},"",b[0])},h=function(a,b,c){J.Transition.run(a,b,c)},i=function(a){b.unshift(a),window.history.pushState({hash:a},"",a)},j=function(a,b){var c=$(a);if(!c.hasClass("active")){b.addClass("active").siblings(".active").removeClass("active");var d=c.addClass("active").siblings(".active").removeClass("active");J.anim(c,"scaleIn",300,function(){c.trigger("articleshow"),d.trigger("articlehide")})}},k=function(){J.isMenuOpen?J.Menu.hide():J.Menu.show()};return{init:c,turnTo:f,back:g}}(),function(){var a={},b=1;J.Scroll=function(c,d){var e,f={hScroll:!1,bounce:!1,lockDirection:!0,useTransform:!0,useTransition:!1,checkDOMChanges:!1};"string"==$.type(c)?e=c:(e=$(c).attr("id"),e||(e="scroll-"+b++,$(c).attr("id",e)));var g;return a[e]?(g=a[e],$.extend(g.options,d),g.refresh()):($.extend(f,d),g=new iScroll(e,f),a[e]=g),g}}(),Jingle.Service=function(){function a(a,b,c,d){var e=!$.isFunction(b);return{url:a,data:e?b:void 0,success:e?$.isFunction(c)?c:void 0:b,dataType:e?d||c:c}}var b="JINGLE_POST_DATA",c=function(a){"post"==a.type?d(a):e(a)},d=function(a){J.offline?(h(a.url,a.data),a.success("数据已存至本地")):$.ajax(a)},e=function(a){var b=a.url+JSON.stringify(a.data);if(J.offline){var c=f(b);c?a.success(c.data,c.createdTime):a.success(c)}else{var d=a.success;a.success=function(a){g(b,a),d(a)},$.ajax(a)}},f=function(a){return JSON.parse(localStorage.getItem(a))},g=function(a,b){var c={data:b,createdTime:new Date};localStorage.setItem(a,JSON.stringify(c))},h=function(a,c){var d=i();d||(d={}),d[a]={data:c,createdTime:new Date},localStorage.setItem(b,JSON.stringify(d))},i=function(a){var c=JSON.parse(localStorage.getItem(b));return a?c[a]:c},j=function(a){if(a){var c=i();delete c[a],localStorage.setItem(b,JSON.stringify(c))}else localStorage.removeItem(b)},k=function(a,b,c){var d=i(a).data;$.ajax({url:a,data:d,type:"post",success:function(){b(a)},error:function(){c(a)}})},l=function(a,b){var c=i();for(var d in c)k(d,a,b)},m=function(){return c(a.apply(null,arguments))},n=function(){var b=a.apply(null,arguments);return b.type="POST",c(b)},o=function(){var b=a.apply(null,arguments);return b.dataType="json",c(b)},p=function(){window.localStorage.clear()};return{ajax:c,get:m,post:n,getJSON:o,getUnPostData:i,removeUnPostData:j,syncPostData:k,syncAllPostData:l,clear:p}}(),Jingle.Template=function(){var a=function(a,b,c){var d='<div class="back-mask"><div class="icon '+c+'"></div><div>'+b+"</div></div>";$(a).html(d)},b=function(b){a(b,"没有找到相关数据","drawer")},c=function(b){a(b,"加载中...","cloud-download")},d=function(a,c,d){var e=$(a);"array"==$.type(d)&&0==d.length?b(e):(e.html(template(c,d)),J.Element.init(e))};return{render:d,background:a,loading:c,no_result:b}}(),Jingle.Toast=function(){var a,b,c,d={toast:'<a href="#">{value}</a>',success:'<i class="icon checkmark-circle"></i>{value}',error:'<i class="icon cancel-circle"></i>{value}',info:'<i class="icon info-2"></i>{value}',loading:'<i class="icon spinner"></i><p>{value}</p><div id="tag_close_toast" class="icon cancel-circle"></div>'},e="toast",f=function(){},g=function(){$("body").append('<div id="jingle_toast"></div><div id="jingle_toast_mask"></div>'),b=$("#jingle_toast_mask"),a=$("#jingle_toast"),j()},h=function(){"loading"==e?(a.hide(),b.hide()):"toast"==e?J.anim(a,"scaleOut",function(){a.hide()}):J.anim(a,"slideUpOut",function(){a.hide()})},i=function(g,i,j){b.hide(),c&&clearTimeout(c),e=g,a.attr("class",g).html(d[g].replace("{value}",i)).show(),"loading"==g?(b.show(),j&&(f=j)):"toast"==g?(J.anim(a,"scaleIn"),c=setTimeout(h,3e3)):(J.anim(a,"slideDownIn"),c=setTimeout(h,3e3))},j=function(){a.on("tap","#tag_close_toast",function(){h(),f()})};return g(),{show:i,hide:h}}(),Jingle.Transition=function(a){var b=!1,c={slide:[["slideRightOut","slideRightIn"],["slideLeftOut","slideLeftIn"]],scale:[["scaleOut","none"],["none","scaleIn"]]},d=function(b,c,d){"none"==d[0]?(b.removeClass("active").addClass("activing"),c.addClass("active"),a.anim(c,d[1],function(){e(b,c)})):"none"==d[1]?(c.addClass("activing"),a.anim(b,d[0],function(){e(b,c)})):(b.removeClass("active").addClass("activing"),c.addClass("active"),a.anim(b,d[0]),a.anim(c,d[1],function(){e(b,c)}))},e=function(c,d){c.removeClass("activing active"),d.removeClass("activing").addClass("active"),d.data("init")||(d.trigger("pageinit"),d.data("init",!0),a.Element.initScroll(d)),c.trigger("pagehide",[b]),d.trigger("pageshow",[b]),c.find("article.active").trigger("articlehide"),d.find("article.active").trigger("articleshow")},f=function(e,f,g){b=g,e=$(e),f=$(f);var h=b?e.attr("data-transition"):f.attr("data-transition");h=h||a.settings.transitionType;var i=b?c[h][0]:c[h][1];d(e,f,i)};return{run:f}}(Jingle),Jingle.Popup=function(){var a,b,c,d={top:{top:0,left:0,right:0},"top-second":{top:"44px",left:0,right:0},center:{top:"50%",left:"10%",right:"10%","border-radius":"3px"},bottom:{bottom:0,left:0,right:0},"bottom-second":{bottom:"51px",left:0,right:0}},e={top:["slideDownIn","slideUpOut"],bottom:["slideUpIn","slideDownOut"],defaultAnim:["scaleIn","scaleOut"]},f=function(){$("body").append('<div id="jingle_popup"></div><div id="jingle_popup_mask"></div>'),b=$("#jingle_popup_mask"),a=$("#jingle_popup"),i()},g=function(f,g,h,i){var j=$.type(g);if(b.show(),a.attr({style:"","class":""}),"object"==j)a.css(g),c=e.defaultAnim;else{if("string"!=j)return console.error("错误的参数！"),void 0;a.css(d[g]);var k=g.indexOf("top")>-1?"top":g.indexOf("bottom")>-1?"bottom":"defaultAnim";c=e[k]}i&&(a.addClass("arrow "+i),a.css("padding","8px"),("top"==i||"bottom"==i)&&(c=e[i])),h&&a.append('<div id="tag_close_popup" data-target="closePopup" class="icon cancel-circle"></div>'),a.html(f).show(),J.Element.init(a),J.anim(a,c[0]),a.trigger("open"),J.hasPopupOpen=!0},h=function(d){b.hide(),J.anim(a,c[1],function(){a.hide(),J.hasPopupOpen=!1,a.trigger("close"),d&&d()})},i=function(){b.on("tap",function(){h()}),a.on("tap",'[data-target="closePopup"]',function(){h()})};f();var j=function(a,b){var c='<div class="popup-title">'+a+'</div><div class="popup-content">'+b+'</div><div id="popup_btn_container"><a data-target="closePopup" data-icon="checkmark">OK</a></div>';g(c,"center",!1)},k=function(a,b,c,d){var e='<div class="popup-title">'+a+'</div><div class="popup-content">'+b+'</div><div id="popup_btn_container"><a data-icon="checkmark">确定</a><a class="cancel" data-icon="close">取消</a></div>';g(e,"center",!0),$('#popup_btn_container [data-icon="checkmark"]').tap(function(){h(c)}),$('#popup_btn_container [data-icon="close"]').tap(function(){h(d)})},l=function(a,b,c){g(a,b,!1,c)};return{show:g,close:h,alert:j,confirm:k,popover:l}}(),Jingle.Menu=function(a){var b={MENU:"body>aside",SECTION_CONTAINER:"#section-container"},c=function(){$(b.MENU).animate({translateX:"0%"},a.settings.transitionTime,"linear",function(){a.isMenuOpen=!0}),$(b.SECTION_CONTAINER).animate({translateX:"264px"},a.settings.transitionTime)},d=function(){$(b.MENU).animate({translateX:"-100%"},a.settings.transitionTime,"linear",function(){a.isMenuOpen=!1}),$(b.SECTION_CONTAINER).animate({translateX:0},a.settings.transitionTime)};return{show:c,hide:d}}(Jingle),function(){function a(a,b){var c,d,e,f,g,h,i,j=function(){},k=function(){return!0},l=!1,m=0,n=300;$.isPlainObject(a)?(c=$(a.selector),b=a.noDots,k=a.onBeforeSlide||k,j=a.onAfterSlide||j):c=$(a);var o=function(){c.css("overflow","hidden"),e=c.children().first(),f=e.children(),g=f.length,h=c.offset().width,e.css("width",g*h),f.css({width:h,"float":"left"}),b||p(),q(0,0)},p=function(){if(d=c.find(".dots"),d.length>0)d.show();else{for(var a=30*g+20+2,b='<div class="dots"><ul>',e=0;g>e;e++)b+='<li index="'+e+'"><a href="#"></a></li>';b+="</ul></div>",c.append(b),d=c.find(".dots"),d.children().css("width",a+"px"),d.find("li").on("tap",function(){var a=$(this).attr("index");q(parseInt(a),n)})}},q=function(a,b){b=b||n,e.animate({translateX:-(a*h)+"px"},b),m=a,d&&$(d.find("li").get(m)).addClass("active").siblings().removeClass("active"),j(m)},r=function(){e.on("touchstart",s,!1),e.on("touchmove",t,!1),e.on("touchend",u,!1)},s=function(a){var b=a.touches[0];start={pageX:b.pageX,pageY:b.pageY,time:Number(new Date)},isScrolling=void 0,i=0,e[0].style.webkitTransitionDuration=0,l=!0},t=function(a){if(l){var b=a.touches[0];if(i=b.pageX-start.pageX,"undefined"==typeof isScrolling&&(isScrolling=!!(isScrolling||Math.abs(i)<Math.abs(b.pageY-start.pageY))),!isScrolling){a.preventDefault();var c=!m&&i>0||m==g-1&&0>i;if(c)return;var d=i-m*h;e[0].style.webkitTransform="translateX("+d+"px)"}}},u=function(){var a=Number(new Date)-start.time<250&&Math.abs(i)>20||Math.abs(i)>h/3,b=!m&&i>0||m==g-1&&0>i;isScrolling||(k(m,i)?q(m+(a&&!b?0>i?1:-1:0),n):q(m)),l=!1};o(),r(),this.refresh=function(){e.attr("style",""),o()},this.prev=function(){m&&q(m-1,n)},this.next=function(){g-1>m&&q(m+1,n)},this.index=function(a){q(a)}}J.Slider=a}(),function(a,b){function c(a){return""===f?a:(a=a.charAt(0).toUpperCase()+a.substr(1),f+a)}var d=Math,e=b.createElement("div").style,f=function(){for(var a,b="t,webkitT,MozT,msT,OT".split(","),c=0,d=b.length;d>c;c++)if(a=b[c]+"ransform",a in e)return b[c].substr(0,b[c].length-1);return!1}(),g=f?"-"+f.toLowerCase()+"-":"",h=c("transform"),i=c("transitionProperty"),j=c("transitionDuration"),k=c("transformOrigin"),l=c("transitionTimingFunction"),m=c("transitionDelay"),n=/android/gi.test(navigator.appVersion),o=/iphone|ipad/gi.test(navigator.appVersion),p=/hp-tablet/gi.test(navigator.appVersion),q=c("perspective")in e,r="ontouchstart"in a&&!p,s=f!==!1,t=c("transition")in e,u="onorientationchange"in a?"orientationchange":"resize",v=r?"touchstart":"mousedown",w=r?"touchmove":"mousemove",x=r?"touchend":"mouseup",y=r?"touchcancel":"mouseup",z=function(){if(f===!1)return!1;var a={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return a[f]}(),A=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(a){return setTimeout(a,1)}}(),B=function(){return a.cancelRequestAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.mozCancelRequestAnimationFrame||a.oCancelRequestAnimationFrame||a.msCancelRequestAnimationFrame||clearTimeout}(),C=q?" translateZ(0)":"",D=function(c,d){var e,f=this;f.wrapper="object"==typeof c?c:b.getElementById(c),f.wrapper.style.overflow="hidden",f.scroller=f.wrapper.children[0],f.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:n,hideScrollbar:o,fadeScrollbar:o&&q,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(e in d)f.options[e]=d[e];f.x=f.options.x,f.y=f.options.y,f.options.useTransform=s&&f.options.useTransform,f.options.hScrollbar=f.options.hScroll&&f.options.hScrollbar,f.options.vScrollbar=f.options.vScroll&&f.options.vScrollbar,f.options.zoom=f.options.useTransform&&f.options.zoom,f.options.useTransition=t&&f.options.useTransition,f.options.zoom&&n&&(C=""),f.scroller.style[i]=f.options.useTransform?g+"transform":"top left",f.scroller.style[j]="0",f.scroller.style[k]="0 0",f.options.useTransition&&(f.scroller.style[l]="cubic-bezier(0.33,0.66,0.66,1)"),f.options.useTransform?f.scroller.style[h]="translate("+f.x+"px,"+f.y+"px)"+C:f.scroller.style.cssText+=";position:absolute;top:"+f.y+"px;left:"+f.x+"px",f.options.useTransition&&(f.options.fixedScrollbar=!0),f.refresh(),f._bind(u,a),f._bind(v),r||"none"!=f.options.wheelAction&&(f._bind("DOMMouseScroll"),f._bind("mousewheel")),f.options.checkDOMChanges&&(f.checkDOMTime=setInterval(function(){f._checkDOMChanges()},500))};D.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){var b=this;switch(a.type){case v:if(!r&&0!==a.button)return;b._start(a);break;case w:b._move(a);break;case x:case y:b._end(a);break;case u:b._resize();break;case"DOMMouseScroll":case"mousewheel":b._wheel(a);break;case z:b._transitionEnd(a)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(a){var c,e=this;return e[a+"Scrollbar"]?(e[a+"ScrollbarWrapper"]||(c=b.createElement("div"),e.options.scrollbarClass?c.className=e.options.scrollbarClass+a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+("h"==a?"height:7px;bottom:1px;left:2px;right:"+(e.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(e.hScrollbar?"7":"2")+"px;top:2px;right:1px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:opacity;"+g+"transition-duration:"+(e.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(e.options.hideScrollbar?"0":"1"),e.wrapper.appendChild(c),e[a+"ScrollbarWrapper"]=c,c=b.createElement("div"),e.options.scrollbarClass||(c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+g+"background-clip:padding-box;"+g+"box-sizing:border-box;"+("h"==a?"height:100%":"width:100%")+";"+g+"border-radius:3px;border-radius:3px"),c.style.cssText+=";pointer-events:none;"+g+"transition-property:"+g+"transform;"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+g+"transition-duration:0;"+g+"transform: translate(0,0)"+C,e.options.useTransition&&(c.style.cssText+=";"+g+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),e[a+"ScrollbarWrapper"].appendChild(c),e[a+"ScrollbarIndicator"]=c),"h"==a?(e.hScrollbarSize=e.hScrollbarWrapper.clientWidth,e.hScrollbarIndicatorSize=d.max(d.round(e.hScrollbarSize*e.hScrollbarSize/e.scrollerW),8),e.hScrollbarIndicator.style.width=e.hScrollbarIndicatorSize+"px",e.hScrollbarMaxScroll=e.hScrollbarSize-e.hScrollbarIndicatorSize,e.hScrollbarProp=e.hScrollbarMaxScroll/e.maxScrollX):(e.vScrollbarSize=e.vScrollbarWrapper.clientHeight,e.vScrollbarIndicatorSize=d.max(d.round(e.vScrollbarSize*e.vScrollbarSize/e.scrollerH),8),e.vScrollbarIndicator.style.height=e.vScrollbarIndicatorSize+"px",e.vScrollbarMaxScroll=e.vScrollbarSize-e.vScrollbarIndicatorSize,e.vScrollbarProp=e.vScrollbarMaxScroll/e.maxScrollY),e._scrollbarPos(a,!0),void 0):(e[a+"ScrollbarWrapper"]&&(s&&(e[a+"ScrollbarIndicator"].style[h]=""),e[a+"ScrollbarWrapper"].parentNode.removeChild(e[a+"ScrollbarWrapper"]),e[a+"ScrollbarWrapper"]=null,e[a+"ScrollbarIndicator"]=null),void 0)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},n?200:0)},_pos:function(a,b){this.zoomed||(a=this.hScroll?a:0,b=this.vScroll?b:0,this.options.useTransform?this.scroller.style[h]="translate("+a+"px,"+b+"px) scale("+this.scale+")"+C:(a=d.round(a),b=d.round(b),this.scroller.style.left=a+"px",this.scroller.style.top=b+"px"),this.x=a,this.y=b,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(a,b){var c,e=this,f="h"==a?e.x:e.y;e[a+"Scrollbar"]&&(f=e[a+"ScrollbarProp"]*f,0>f?(e.options.fixedScrollbar||(c=e[a+"ScrollbarIndicatorSize"]+d.round(3*f),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px"),f=0):f>e[a+"ScrollbarMaxScroll"]&&(e.options.fixedScrollbar?f=e[a+"ScrollbarMaxScroll"]:(c=e[a+"ScrollbarIndicatorSize"]-d.round(3*(f-e[a+"ScrollbarMaxScroll"])),8>c&&(c=8),e[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=c+"px",f=e[a+"ScrollbarMaxScroll"]+(e[a+"ScrollbarIndicatorSize"]-c))),e[a+"ScrollbarWrapper"].style[m]="0",e[a+"ScrollbarWrapper"].style.opacity=b&&e.options.hideScrollbar?"0":"1",e[a+"ScrollbarIndicator"].style[h]="translate("+("h"==a?f+"px,0)":"0,"+f+"px)")+C)},_start:function(b){var c,e,f,g,i,j=this,k=r?b.touches[0]:b;j.enabled&&(j.options.onBeforeScrollStart&&j.options.onBeforeScrollStart.call(j,b),(j.options.useTransition||j.options.zoom)&&j._transitionTime(0),j.moved=!1,j.animating=!1,j.zoomed=!1,j.distX=0,j.distY=0,j.absDistX=0,j.absDistY=0,j.dirX=0,j.dirY=0,j.options.zoom&&r&&b.touches.length>1&&(g=d.abs(b.touches[0].pageX-b.touches[1].pageX),i=d.abs(b.touches[0].pageY-b.touches[1].pageY),j.touchesDistStart=d.sqrt(g*g+i*i),j.originX=d.abs(b.touches[0].pageX+b.touches[1].pageX-2*j.wrapperOffsetLeft)/2-j.x,j.originY=d.abs(b.touches[0].pageY+b.touches[1].pageY-2*j.wrapperOffsetTop)/2-j.y,j.options.onZoomStart&&j.options.onZoomStart.call(j,b)),j.options.momentum&&(j.options.useTransform?(c=getComputedStyle(j.scroller,null)[h].replace(/[^0-9\-.,]/g,"").split(","),e=+(c[12]||c[4]),f=+(c[13]||c[5])):(e=+getComputedStyle(j.scroller,null).left.replace(/[^0-9-]/g,""),f=+getComputedStyle(j.scroller,null).top.replace(/[^0-9-]/g,"")),(e!=j.x||f!=j.y)&&(j.options.useTransition?j._unbind(z):B(j.aniTime),j.steps=[],j._pos(e,f),j.options.onScrollEnd&&j.options.onScrollEnd.call(j))),j.absStartX=j.x,j.absStartY=j.y,j.startX=j.x,j.startY=j.y,j.pointX=k.pageX,j.pointY=k.pageY,j.startTime=b.timeStamp||Date.now(),j.options.onScrollStart&&j.options.onScrollStart.call(j,b),j._bind(w,a),j._bind(x,a),j._bind(y,a))},_move:function(a){var b,c,e,f=this,g=r?a.touches[0]:a,i=g.pageX-f.pointX,j=g.pageY-f.pointY,k=f.x+i,l=f.y+j,m=a.timeStamp||Date.now();return f.options.onBeforeScrollMove&&f.options.onBeforeScrollMove.call(f,a),f.options.zoom&&r&&a.touches.length>1?(b=d.abs(a.touches[0].pageX-a.touches[1].pageX),c=d.abs(a.touches[0].pageY-a.touches[1].pageY),f.touchesDist=d.sqrt(b*b+c*c),f.zoomed=!0,e=1/f.touchesDistStart*f.touchesDist*this.scale,e<f.options.zoomMin?e=.5*f.options.zoomMin*Math.pow(2,e/f.options.zoomMin):e>f.options.zoomMax&&(e=2*f.options.zoomMax*Math.pow(.5,f.options.zoomMax/e)),f.lastScale=e/this.scale,k=this.originX-this.originX*f.lastScale+this.x,l=this.originY-this.originY*f.lastScale+this.y,this.scroller.style[h]="translate("+k+"px,"+l+"px) scale("+e+")"+C,f.options.onZoom&&f.options.onZoom.call(f,a),void 0):(f.pointX=g.pageX,f.pointY=g.pageY,(k>0||k<f.maxScrollX)&&(k=f.options.bounce?f.x+i/2:k>=0||f.maxScrollX>=0?0:f.maxScrollX),(l>f.minScrollY||l<f.maxScrollY)&&(l=f.options.bounce?f.y+j/2:l>=f.minScrollY||f.maxScrollY>=0?f.minScrollY:f.maxScrollY),f.distX+=i,f.distY+=j,f.absDistX=d.abs(f.distX),f.absDistY=d.abs(f.distY),f.absDistX<6&&f.absDistY<6||(f.options.lockDirection&&(f.absDistX>f.absDistY+5?(l=f.y,j=0):f.absDistY>f.absDistX+5&&(k=f.x,i=0)),f.moved=!0,f._pos(k,l),f.dirX=i>0?-1:0>i?1:0,f.dirY=j>0?-1:0>j?1:0,m-f.startTime>300&&(f.startTime=m,f.startX=f.x,f.startY=f.y),f.options.onScrollMove&&f.options.onScrollMove.call(f,a)),void 0)},_end:function(c){if(!r||0===c.touches.length){var e,f,g,i,k,l,m,n=this,o=r?c.changedTouches[0]:c,p={dist:0,time:0},q={dist:0,time:0},s=(c.timeStamp||Date.now())-n.startTime,t=n.x,u=n.y;if(n._unbind(w,a),n._unbind(x,a),n._unbind(y,a),n.options.onBeforeScrollEnd&&n.options.onBeforeScrollEnd.call(n,c),n.zoomed)return m=n.scale*n.lastScale,m=Math.max(n.options.zoomMin,m),m=Math.min(n.options.zoomMax,m),n.lastScale=m/n.scale,n.scale=m,n.x=n.originX-n.originX*n.lastScale+n.x,n.y=n.originY-n.originY*n.lastScale+n.y,n.scroller.style[j]="200ms",n.scroller.style[h]="translate("+n.x+"px,"+n.y+"px) scale("+n.scale+")"+C,n.zoomed=!1,n.refresh(),n.options.onZoomEnd&&n.options.onZoomEnd.call(n,c),void 0;if(!n.moved)return r&&(n.doubleTapTimer&&n.options.zoom?(clearTimeout(n.doubleTapTimer),n.doubleTapTimer=null,n.options.onZoomStart&&n.options.onZoomStart.call(n,c),n.zoom(n.pointX,n.pointY,1==n.scale?n.options.doubleTapZoom:1),n.options.onZoomEnd&&setTimeout(function(){n.options.onZoomEnd.call(n,c)},200)):this.options.handleClick&&(n.doubleTapTimer=setTimeout(function(){for(n.doubleTapTimer=null,e=o.target;1!=e.nodeType;)e=e.parentNode;"SELECT"!=e.tagName&&"INPUT"!=e.tagName&&"TEXTAREA"!=e.tagName&&(f=b.createEvent("MouseEvents"),f.initMouseEvent("click",!0,!0,c.view,1,o.screenX,o.screenY,o.clientX,o.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),f._fake=!0,e.dispatchEvent(f))},n.options.zoom?250:0))),n._resetPos(400),n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c),void 0;if(300>s&&n.options.momentum&&(p=t?n._momentum(t-n.startX,s,-n.x,n.scrollerW-n.wrapperW+n.x,n.options.bounce?n.wrapperW:0):p,q=u?n._momentum(u-n.startY,s,-n.y,n.maxScrollY<0?n.scrollerH-n.wrapperH+n.y-n.minScrollY:0,n.options.bounce?n.wrapperH:0):q,t=n.x+p.dist,u=n.y+q.dist,(n.x>0&&t>0||n.x<n.maxScrollX&&t<n.maxScrollX)&&(p={dist:0,time:0}),(n.y>n.minScrollY&&u>n.minScrollY||n.y<n.maxScrollY&&u<n.maxScrollY)&&(q={dist:0,time:0})),p.dist||q.dist)return k=d.max(d.max(p.time,q.time),10),n.options.snap&&(g=t-n.absStartX,i=u-n.absStartY,d.abs(g)<n.options.snapThreshold&&d.abs(i)<n.options.snapThreshold?n.scrollTo(n.absStartX,n.absStartY,200):(l=n._snap(t,u),t=l.x,u=l.y,k=d.max(l.time,k))),n.scrollTo(d.round(t),d.round(u),k),n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c),void 0;if(n.options.snap)return g=t-n.absStartX,i=u-n.absStartY,d.abs(g)<n.options.snapThreshold&&d.abs(i)<n.options.snapThreshold?n.scrollTo(n.absStartX,n.absStartY,200):(l=n._snap(n.x,n.y),(l.x!=n.x||l.y!=n.y)&&n.scrollTo(l.x,l.y,l.time)),n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c),void 0;n._resetPos(200),n.options.onTouchEnd&&n.options.onTouchEnd.call(n,c)}},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=b.minScrollY||b.maxScrollY>0?b.minScrollY:b.y<b.maxScrollY?b.maxScrollY:b.y;return c==b.x&&d==b.y?(b.moved&&(b.moved=!1,b.options.onScrollEnd&&b.options.onScrollEnd.call(b)),b.hScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.hScrollbarWrapper.style[m]="300ms"),b.hScrollbarWrapper.style.opacity="0"),b.vScrollbar&&b.options.hideScrollbar&&("webkit"==f&&(b.vScrollbarWrapper.style[m]="300ms"),b.vScrollbarWrapper.style.opacity="0"),void 0):(b.scrollTo(c,d,a||0),void 0)},_wheel:function(a){var b,c,d,e,f,g=this;if("wheelDeltaX"in a)b=a.wheelDeltaX/12,c=a.wheelDeltaY/12;else if("wheelDelta"in a)b=c=a.wheelDelta/12;else{if(!("detail"in a))return;b=c=3*-a.detail}return"zoom"==g.options.wheelAction?(f=g.scale*Math.pow(2,1/3*(c?c/Math.abs(c):0)),f<g.options.zoomMin&&(f=g.options.zoomMin),f>g.options.zoomMax&&(f=g.options.zoomMax),f!=g.scale&&(!g.wheelZoomCount&&g.options.onZoomStart&&g.options.onZoomStart.call(g,a),g.wheelZoomCount++,g.zoom(a.pageX,a.pageY,f,400),setTimeout(function(){g.wheelZoomCount--,!g.wheelZoomCount&&g.options.onZoomEnd&&g.options.onZoomEnd.call(g,a)},400)),void 0):(d=g.x+b,e=g.y+c,d>0?d=0:d<g.maxScrollX&&(d=g.maxScrollX),e>g.minScrollY?e=g.minScrollY:e<g.maxScrollY&&(e=g.maxScrollY),g.maxScrollY<0&&g.scrollTo(d,e,0),void 0)},_transitionEnd:function(a){var b=this;a.target==b.scroller&&(b._unbind(z),b._startAni())},_startAni:function(){var a,b,c,e=this,f=e.x,g=e.y,h=Date.now();if(!e.animating){if(!e.steps.length)return e._resetPos(400),void 0;if(a=e.steps.shift(),a.x==f&&a.y==g&&(a.time=0),e.animating=!0,e.moved=!0,e.options.useTransition)return e._transitionTime(a.time),e._pos(a.x,a.y),e.animating=!1,a.time?e._bind(z):e._resetPos(0),void 0;c=function(){var i,j,k=Date.now();return k>=h+a.time?(e._pos(a.x,a.y),e.animating=!1,e.options.onAnimationEnd&&e.options.onAnimationEnd.call(e),e._startAni(),void 0):(k=(k-h)/a.time-1,b=d.sqrt(1-k*k),i=(a.x-f)*b+f,j=(a.y-g)*b+g,e._pos(i,j),e.animating&&(e.aniTime=A(c)),void 0)},c()}},_transitionTime:function(a){a+="ms",this.scroller.style[j]=a,this.hScrollbar&&(this.hScrollbarIndicator.style[j]=a),this.vScrollbar&&(this.vScrollbarIndicator.style[j]=a)},_momentum:function(a,b,c,e,f){var g=6e-4,h=d.abs(a)/b,i=h*h/(2*g),j=0,k=0;return a>0&&i>c?(k=f/(6/(i/h*g)),c+=k,h=h*c/i,i=c):0>a&&i>e&&(k=f/(6/(i/h*g)),e+=k,h=h*e/i,i=e),i*=0>a?-1:1,j=h/g,{dist:i,time:d.round(j)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return a!=this.wrapper&&(b*=this.scale,c*=this.scale),{left:b,top:c}},_snap:function(a,b){var c,e,f,g,h,i,j=this;for(f=j.pagesX.length-1,c=0,e=j.pagesX.length;e>c;c++)if(a>=j.pagesX[c]){f=c;break}for(f==j.currPageX&&f>0&&j.dirX<0&&f--,a=j.pagesX[f],h=d.abs(a-j.pagesX[j.currPageX]),h=h?500*(d.abs(j.x-a)/h):0,j.currPageX=f,f=j.pagesY.length-1,c=0;f>c;c++)if(b>=j.pagesY[c]){f=c;break}return f==j.currPageY&&f>0&&j.dirY<0&&f--,b=j.pagesY[f],i=d.abs(b-j.pagesY[j.currPageY]),i=i?500*(d.abs(j.y-b)/i):0,j.currPageY=f,g=d.round(d.max(h,i))||200,{x:a,y:b,time:g}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var b=this;b.scroller.style[h]="",b.hScrollbar=!1,b.vScrollbar=!1,b._scrollbar("h"),b._scrollbar("v"),b._unbind(u,a),b._unbind(v),b._unbind(w,a),b._unbind(x,a),b._unbind(y,a),b.options.hasTouch||(b._unbind("DOMMouseScroll"),b._unbind("mousewheel")),b.options.useTransition&&b._unbind(z),b.options.checkDOMChanges&&clearInterval(b.checkDOMTime),b.options.onDestroy&&b.options.onDestroy.call(b)},refresh:function(){var a,b,c,e,f=this,g=0,h=0;if(f.scale<f.options.zoomMin&&(f.scale=f.options.zoomMin),f.wrapperW=f.wrapper.clientWidth||1,f.wrapperH=f.wrapper.clientHeight||1,f.minScrollY=-f.options.topOffset||0,f.scrollerW=d.round(f.scroller.offsetWidth*f.scale),f.scrollerH=d.round((f.scroller.offsetHeight+f.minScrollY)*f.scale),f.maxScrollX=f.wrapperW-f.scrollerW,f.maxScrollY=f.wrapperH-f.scrollerH+f.minScrollY,f.dirX=0,f.dirY=0,f.options.onRefresh&&f.options.onRefresh.call(f),f.hScroll=f.options.hScroll&&f.maxScrollX<0,f.vScroll=f.options.vScroll&&(!f.options.bounceLock&&!f.hScroll||f.scrollerH>f.wrapperH),f.hScrollbar=f.hScroll&&f.options.hScrollbar,f.vScrollbar=f.vScroll&&f.options.vScrollbar&&f.scrollerH>f.wrapperH,a=f._offset(f.wrapper),f.wrapperOffsetLeft=-a.left,f.wrapperOffsetTop=-a.top,"string"==typeof f.options.snap)for(f.pagesX=[],f.pagesY=[],e=f.scroller.querySelectorAll(f.options.snap),b=0,c=e.length;c>b;b++)g=f._offset(e[b]),g.left+=f.wrapperOffsetLeft,g.top+=f.wrapperOffsetTop,f.pagesX[b]=g.left<f.maxScrollX?f.maxScrollX:g.left*f.scale,f.pagesY[b]=g.top<f.maxScrollY?f.maxScrollY:g.top*f.scale;else if(f.options.snap){for(f.pagesX=[];g>=f.maxScrollX;)f.pagesX[h]=g,g-=f.wrapperW,h++;for(f.maxScrollX%f.wrapperW&&(f.pagesX[f.pagesX.length]=f.maxScrollX-f.pagesX[f.pagesX.length-1]+f.pagesX[f.pagesX.length-1]),g=0,h=0,f.pagesY=[];g>=f.maxScrollY;)f.pagesY[h]=g,g-=f.wrapperH,h++;
f.maxScrollY%f.wrapperH&&(f.pagesY[f.pagesY.length]=f.maxScrollY-f.pagesY[f.pagesY.length-1]+f.pagesY[f.pagesY.length-1])}f._scrollbar("h"),f._scrollbar("v"),f.zoomed||(f.scroller.style[j]="0",f._resetPos(400))},scrollTo:function(a,b,c,d){var e,f,g=this,h=a;for(g.stop(),h.length||(h=[{x:a,y:b,time:c,relative:d}]),e=0,f=h.length;f>e;e++)h[e].relative&&(h[e].x=g.x-h[e].x,h[e].y=g.y-h[e].y),g.steps.push({x:h[e].x,y:h[e].y,time:h[e].time||0});g._startAni()},scrollToElement:function(a,b){var c,e=this;a=a.nodeType?a:e.scroller.querySelector(a),a&&(c=e._offset(a),c.left+=e.wrapperOffsetLeft,c.top+=e.wrapperOffsetTop,c.left=c.left>0?0:c.left<e.maxScrollX?e.maxScrollX:c.left,c.top=c.top>e.minScrollY?e.minScrollY:c.top<e.maxScrollY?e.maxScrollY:c.top,b=void 0===b?d.max(2*d.abs(c.left),2*d.abs(c.top)):b,e.scrollTo(c.left,c.top,b))},scrollToPage:function(a,b,c){var d,e,f=this;c=void 0===c?400:c,f.options.onScrollStart&&f.options.onScrollStart.call(f),f.options.snap?(a="next"==a?f.currPageX+1:"prev"==a?f.currPageX-1:a,b="next"==b?f.currPageY+1:"prev"==b?f.currPageY-1:b,a=0>a?0:a>f.pagesX.length-1?f.pagesX.length-1:a,b=0>b?0:b>f.pagesY.length-1?f.pagesY.length-1:b,f.currPageX=a,f.currPageY=b,d=f.pagesX[a],e=f.pagesY[b]):(d=-f.wrapperW*a,e=-f.wrapperH*b,d<f.maxScrollX&&(d=f.maxScrollX),e<f.maxScrollY&&(e=f.maxScrollY)),f.scrollTo(d,e,c)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(w,a),this._unbind(x,a),this._unbind(y,a)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(z):B(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(a,b,c,d){var e=this,f=c/e.scale;e.options.useTransform&&(e.zoomed=!0,d=void 0===d?200:d,a=a-e.wrapperOffsetLeft-e.x,b=b-e.wrapperOffsetTop-e.y,e.x=a-a*f+e.x,e.y=b-b*f+e.y,e.scale=c,e.refresh(),e.x=e.x>0?0:e.x<e.maxScrollX?e.maxScrollX:e.x,e.y=e.y>e.minScrollY?e.minScrollY:e.y<e.maxScrollY?e.maxScrollY:e.y,e.scroller.style[j]=d+"ms",e.scroller.style[h]="translate("+e.x+"px,"+e.y+"px) scale("+c+")"+C,e.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},e=null,"undefined"!=typeof exports?exports.iScroll=D:a.iScroll=D}(window,document);